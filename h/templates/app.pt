<metal:main use-macro="load: base.pt">
  <div id="header" metal:fill-slot="header">
    <img alt="hypothes.is"
         class="hyp-logo"
         height="30px"
         src="${request.static_url('h:images/hypothesis.png')}" />
    <div metal:use-macro="auth" tal:define="auth load: auth.pt" />
  </div>

  <div id="app" metal:fill-slot="content">
    <script tal:attributes="src src"
            tal:repeat="src environment['annotator'].urls()"></script>
    <script tal:attributes="src src"
            tal:repeat="src environment['d3'].urls()"></script>
    <script tal:attributes="src src"
            tal:repeat="src environment['easyXDM'].urls()"></script>
    <script tal:attributes="src src"
            tal:repeat="src environment['handlebars'].urls()"></script>
    <script tal:attributes="src src"
            tal:repeat="src environment['jwz'].urls()"></script>
    <script tal:attributes="src src"
            tal:repeat="src environment['templates'].urls()"></script>
    <script tal:attributes="src src"
            tal:repeat="src environment['underscore'].urls()"></script>
    <script>
      window.annotator = new Hypothesis(document.body, {
      Auth: {
      tokenUrl: '${request.route_url('token')}'
      },
      Heatmap: {}
      })
    </script>
  </div>
</metal:main>
