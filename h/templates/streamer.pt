<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html metal:use-macro="main_template" >
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <!-- Always force latest IE rendering engine (even in intranet) &amp; Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <title>Test Streamer</title>
    <link href="css/displayer.css" rel="stylesheet" type="text/css">  
  </head>
  <style type="text/css"></style>

  <body metal:fill-slot="body" ng-app="h.streamer">
    <script type="text/javascript">var port = ${port};</script>
    <span ng-controller="StreamerCtrl">
    <div class="topbar">
      <div class="inner">
        <div class="barbutton pull-left">
          <h4>hypothes<span class="red">.</span>is</h4>
        </div>
        <div class="barbutton pull-left">
          <h4 ng-show="streaming">Streaming :)</h4>
          <h4 ng-hide="streaming">Not streaming <span class="red">:(</span></h4>
        </div>
        <div class="barbutton pull-right">
          <span>sign up</span>
        </div>
      </div>
    </div>

    <div class="content paper">  
      <div class="knockout noise">
        <div class="paper excerpt">
          <div>
            <input type="radio" ng-model="matchPolicy" name="match_policy" value="include_all" >include_all</input>
            <input type="radio" ng-model="matchPolicy" name="match_policy" value="include_any" >include_any</input>
            <input type="radio" ng-model="matchPolicy" name="match_policy" value="exclude_all" >exclude_all</input>
            <input type="radio" ng-model="matchPolicy" name="match_policy" value="exclude_any" >exclude_any</input>
          </div>
          <div class>
            <input type="checkbox" data-col="1" ng-model="action_create">Create</input>
            <input type="checkbox" data-col="1" ng-model="action_edit">Edit</input>
            <input type="checkbox" data-col="1" ng-model="action_delete">Delete</input>
          </div>
          <div><input type="text" ng-model="clauses" placeholder="any"/></div>
          <div>
            <button ng-click="parse_clauses()" class="btn check-icon">Check filters</button>
            <button ng-click="generate_json()" class="btn check-icon">Generate request</button>
            <button ng-click="start_streaming()" class="btn check-icon">Start streaming</button>
          </div>
        </div>
      </div>
    </div>   
     
    <!--
    <div class="content paper">  
      <ul class="annotator-listing annotator-widget">
        <div class="papercontainer">
          <div class="metadata">
            <div class="annotation paper detail filter-inline">
              <div class="filter-title">
                Filters
              </div>
              <div>
                <span class="pull-left filter-element filter-block">
                  <div>Username(s)</div> 
                  <div><input class="filter-input" type="text" ng-model="username" placeholder="any"/></div>
                </span>

                <span class="pull-left filter-element filter-block">
                  <div>Thread(s)</div> 
                  <div><input class="filter-input" type="text" ng-model="threads" placeholder="any"/></div>
                </span>

                <span class="pull-left filter-element filter-block">
                  <div>Keyword(s)</div> 
                  <div><input class="filter-input" type="text" ng-model="keywords" placeholder="any"/></div>
                </span>

                <span class="pull-left filter-element filter-block">
                  <div>
                     Action(s)
                  </div>
                  <div class="filter-checkboxes">
                    <span>
                      <input type="checkbox" data-col="1" ng-model="action_create"/>
                      Create
                    </span>
                    <span>
                      <input type="checkbox" data-col="1" ng-model="action_update"/>
                      Update
                    </span>
                    <span>
                      <input type="checkbox" data-col="1" ng-model="action_delete"/>
                      Delete
                    </span>
                  </div>
                </span>
             
                <span class="pull-right filter-element filter-block">
                  <div>
                    <span ng-show="streaming"><button ng-click="start_streaming()" class="btn check-icon">Change filter parameters</button></span>
                    <span ng-hide="streaming"><button ng-click="start_streaming()" class="btn check-icon">Start streaming</button></span>
                  </div>
                  <div class="filter-checkboxes">
                    <span ng-show="streaming"><button ng-click="stop_streaming()" class="btn check-icon">Stop streaming</button></span>
                  </div>
                </span>
              </div>
            </div>
            <div>
            </div>
          </div>
        </div>
      </ul>
	  -->

      <ul class="annotator-listing annotator-widget">
        <div class="papercontainer">
          <div class="metadata">
            <div>
              <li ng-repeat="annotation in annotations">
                <div class="hyp-annotation hyp-paper hyp-detail">
                  <div style="padding-bottom: .5em;">                
                    <div class="topbar">
                      <div>
                        <span class="hyp-user">{{annotation['user'] | userName}}</span>
                        <span ng-switch="annotation['action']">
                          <span ng-switch-when="create">&nbsp;has created an annotation</span>
                          <span ng-switch-when="update">&nbsp;has updated an annotation</span>
                          <span ng-switch-when="delete">&nbsp;has deleted an annotation</span>
                        </span> 
                        <div class="hyp-time">{{annotation['created'] | fuzzyTime}}</div>
                      </div>
                    </div>
		          <div class="noiseknockout">

              <div class="page">
                <div class="domain">
                  <img class="favicon" ng-model="annotation['favicon']"/> 
                  <a href="{{annotation['uri']}}">{{annotation['title']}}</a> 
                  | 
                  <a href="{{annotation['domain']}}">{{annotation['domain_stripped']}}</a>
                </div>
              </div>

                    <div class="hyp-excerpt hyp-paper stream-floatainer margin-right">
                      <blockquote>{{annotation['quote']}}</blockquote>
                    </div>
                    <div class="smalldisplacer"></div>
                    <div class="hyp-excerpt hyp-paper stream-floatainer">
                      <div>{{annotation['text']}}</div>
                    </div>
                  </div>
                </div>
                </div>
            </li>
          </div>
          </div>
          </div>
      </ul>
   </span>
  </body>
</html>
